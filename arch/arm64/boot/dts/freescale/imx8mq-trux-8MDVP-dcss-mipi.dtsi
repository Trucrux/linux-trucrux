/* Copyrights Trucrux 2022 */

&hdmi {
	status = "disabled";
};

&backlight {
		status = "okay";
	};

&lcdif {
	status = "disable";
	};

&irqsteer{
	status = "okay";
	};

&dcss {
	status = "okay";
	clocks = <&clk IMX8MQ_CLK_DISP_APB_ROOT>,
		<&clk IMX8MQ_CLK_DISP_AXI_ROOT>,
		<&clk IMX8MQ_CLK_DISP_RTRM_ROOT>,
		<&clk IMX8MQ_CLK_DC_PIXEL>,
		<&clk IMX8MQ_CLK_DISP_DTRC>;
	clock-names = "apb", "axi", "rtrm", "pix", "dtrc";
	assigned-clocks = <&clk IMX8MQ_CLK_DC_PIXEL>,
			<&clk IMX8MQ_VIDEO_PLL1_BYPASS>,
			<&clk IMX8MQ_VIDEO_PLL1_REF_SEL>,
			<&clk IMX8MQ_CLK_DISP_AXI>,
			<&clk IMX8MQ_CLK_DISP_RTRM>;
	assigned-clock-parents = <&clk IMX8MQ_VIDEO_PLL1_OUT>,
				<&clk IMX8MQ_VIDEO_PLL1>,
				<&clk IMX8MQ_CLK_27M>,
				<&clk IMX8MQ_SYS1_PLL_800M>,
				<&clk IMX8MQ_SYS1_PLL_800M>;
	assigned-clock-rates = <600000000>, <0>, <0>,
				<800000000>,
				<400000000>;
	port@0 {
		dcss_out: endpoint {
			remote-endpoint = <&mipi_dsi_in>;
		};
	};
};


&mipi_dsi {

	#address-cells = <1>;
	#size-cells = <0>;
	status = "okay";

	panel@0 {
		compatible = "bananapi,lhr050h41", "ilitek,ili9881c";
		pinctrl-0 = <&pinctrl_mipi_dsi_rst>;
		pinctrl-names = "default";
		reset-gpio = <&gpio3 5 GPIO_ACTIVE_LOW>;
		reg = <0>;
		timing-mode = <1>;
		video-mode = <3>;
		
		port {
			panel_in: endpoint {
				remote-endpoint = <&mipi_dsi_out>;
				};
			};
		};

	ports {
		#address-cells = <1>;
		#size-cells = <0>;
		port@0 {
			reg = <0>;
			mipi_dsi_in: endpoint {
				remote-endpoint = <&dcss_out>;
				};
			};
		port@1 {
			reg = <1>;
			mipi_dsi_out: endpoint {
				remote-endpoint = <&panel_in>;
				};
			};
	};
};

&dphy {
        status = "okay";
};


&i2c2 {
	address-cells = <1>;
	#size-cells = <0>;
	status = "okay";

	polytouch: edt-gt9xx@14 {
		compatible = "goodix,gt911";
		reg = <0x14>;
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_touch_irq &pinctrl_touch_rst>;
		interrupt-parent = <&gpio1>;
		interrupts = <14 IRQ_TYPE_EDGE_FALLING>;
		reset-gpios = <&gpio4 5 GPIO_ACTIVE_LOW>;
		touchscreen-size-x = <800>;
		touchscreen-size-y = <1280>;
	};
};
